{
  "hash": "49a5b4733e7f28bc1ddb9ee949573e5d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Ubuntu on WSL2\"\ndescription: \"Ubuntu on WSL2 제거 및 설치방법\"\nauthor: \"BenKorea\"\ndate: \"2024-11-16\"\ndate-modified: last-modified\ncategories: [WSL2, setup]\n---\n\n\n\n\n## 필요성\n\n-   운영체제 중 개발에 유리하고 속도가 윈도우보다는 빠른 우분투 on WSL2를 선택함.\n-   NMIQ유지보수를 간편하게 할려면 도커로 배포 필요 도커는 리눅스환경이 필요하여, 일단은 윈도우10에서 WSL2을 활성화 필요\n\n## WSL2상의 우분투 완전 제거\n\n### 우분투버전 확인\n\n-   Command Prompt를 관리자권한으로 가장 빠르게 여는 방법은 `Win+X`입니다.\n\n-   아래의 명령으로 설치된 Linux 배포판을 확인합니다.\n\n\n\n\n::: {.cell filename='관리자권한 Command Prompt'}\n\n```{.r .cell-code}\n wsl --list --verbose\n```\n:::\n\n\n\n\n또는\n\n\n\n\n::: {.cell filename='관리자권한 Command Prompt'}\n\n```{.r .cell-code}\n wsl -l -v\n```\n:::\n\n\n\n\n### 우분투 등록 취소 및 제거\n\n아래와 같이 Linux 배포판의 등록을 취소하고 제거합니다.\n\n\n\n\n::: {.cell filename='관리자권한 Command Prompt'}\n\n```{.r .cell-code}\nwsl --unregister Ubuntu-24.04\n```\n:::\n\n\n\n\n-   이때 완료라는 메세지가 출력됩니다.\n\n-   이렇게 하면 우분투가 사용하는 가상 디스크(ext4.vhdx)파일도 자동으로 삭제되어 편리하며 혹시 오류가 있어 삭제되지 않을 수 있으므로 확인하는 것이 바람직합니다.\n\n    -   `C:\\Users\\<사용자이름>\\AppData\\Local\\Packages\\` 에서 `Canonical* 폴더` 삭제\n\n    -   `C:\\Program Files\\WindowsApps` 내 `Canonical* 폴더` 삭제 (권한 필요)\n\n-   후자는 권한이 필요하여, `C:\\Program Files\\WindowsApps` 폴더의 소유자를 변경하는 것보다 아래와 같이 Command Prompt를 관리자권한으로 열어서 del 명령으로 삭제하는 것이 훨씬 간편하다.\n\n    -   시작메뉴를 누르고 검색에 cmd를 입력하고, 마우스 오른쪽 버튼을 눌러 관리자권한으로 실행한다.\n\n\n\n\n::: {.cell filename='Command Prompt'}\n\n```{.r .cell-code}\ndel /f /q \"C:\\경로\\파일이름\"\n```\n:::\n\n\n\n\n### 윈도우에서 앱제거\n\n-   시작메뉴를 누르고 설정을 클릭하고, 앱을 클릭하여 Ubuntu를 검색하여 제거합니다.\n\n### 재부팅\n\n### VirtualMachinePlatform 제거\n\n\n\n\n::: {.cell filename='PowerShell'}\n\n```{.r .cell-code}\ndism.exe /online /disable-feature /featurename:VirtualMachinePlatform /norestart\n```\n:::\n\n\n\n\n### wsl 제거\n\n\n\n\n::: {.cell filename='PowerShell'}\n\n```{.r .cell-code}\ndism.exe /online /disable-feature /featurename:Microsoft-Windows-Subsystem-Linux /norestart\n```\n:::\n\n\n\n\n### 재부팅\n\n## WSL2 설치\n\n### Window edition 및 버전확인\n\n윈도우 10 HOME 버전의 경우 ARM64 시스템의 경우 빌드 19041부터 WSL 2를 지원한다.\n\n![](images/노트북_Window_버전.png)\n\n![](images/desktop-window-version.JPG)\n\n### WSL 설치명령\n이전과는 다르게 아래의 자동화된 명령한 줄로 설치가 됩니다.\n\n\n\n::: {.cell filename='PowerShell'}\n\n```{.r .cell-code}\nwsl --install\n```\n:::\n\n\n\n이는 wsl 옵션과 가상머신플랫폼을 활성화시키고 최신 리눅스커널까지 upgrade해 줍니다.\n\n\n### 재부팅\n변경사항을 적용하기 위해서는 시스템을 다시 시작하라는 메세지가 나옵니다.\n\n### 중간점검\n- `Win+X+A`로 관리자권한 Command Prompt를 열어서\n    - 리눅스커널이 정상작동하는지 아래의 명령어로 확인합니다.\n\n\n\n\n::: {.cell filename='관리자: 명령 프롬프트'}\n\n```{.r .cell-code}\nwsl --version\n```\n:::\n\n\n\nWSL 버전과 커널버전까지 표시되므로 확인할 수 있습니다.\n\n## 우분투설치\n- 관리자권한 Command Prompt에서 다음의 명령을 입력하여 최신 배포판을 설치할 수 있습니다.\n- 그런데 방화벽이나 회상방침에 따라 인터넷 연결이 제한적인 경우에는 문제가 발생하여 Public WiFi로 전환하면 성공하게 됩니다. \n\n\n\n\n::: {.cell filename='관리자: 명령 프롬프트'}\n\n```{.r .cell-code}\nwsl --install -d Ubuntu\n```\n:::\n\n\n\n\n### default Unix user accout\n- 소문자가 바람직하다.\n- passwd를 입력하라는 메세지가 나오면, 비밀번호를 입력한다.\n\n### 우분투 디렉토리 구조\n\n\n::: {#fig-DirectoryStructureUbuntu}\n```\n/\n├── bin → /usr/bin         # 주요 실행 파일 (ls, cp 등)이 위치한 디렉토리. 기본 명령어 포함.\n├── boot                   # 부팅 관련 파일이 저장됨 (커널, grub 등).\n├── dev                    # 장치 파일(device files)이 위치 (예: /dev/sda, /dev/null 등).\n├── etc                    # 시스템 설정 파일(configuration files)이 저장된 곳.\n├── home                   # 일반 사용자들의 홈 디렉토리 (예: /home/username).\n├── lib → /usr/lib         # 공유 라이브러리(.so 파일)들이 저장된 디렉토리.\n├── lib64 → /usr/lib64     # 64비트 라이브러리들이 저장됨.\n├── media                  # USB, CD-ROM 등의 자동 마운트 지점.\n├── mnt                    # 외부 장치를 수동으로 마운트할 때 사용하는 디렉토리.\n├── opt                    # 서드파티 애플리케이션들이 설치되는 디렉토리 (예: /opt/google).\n├── proc                   # 실행 중인 프로세스 및 커널 정보가 담긴 가상 파일 시스템.\n├── root                   # root(관리자) 사용자의 홈 디렉토리.\n├── run                    # 부팅 후 생성되는 임시 런타임 데이터가 저장됨.\n├── sbin → /usr/sbin       # 시스템 관리 명령어들이 위치 (예: reboot, iptables 등).\n├── srv                    # 웹, FTP 등 서비스를 위한 데이터 저장용 디렉토리.\n├── sys                    # 시스템 하드웨어 및 장치 정보에 접근하는 가상 파일 시스템.\n├── tmp                    # 임시 파일 저장소. 재부팅 시 대부분 삭제됨.\n├── usr                    # 사용자 명령어 및 라이브러리 저장소.\n│   ├── bin                # 대부분의 사용자 명령어들이 위치.\n│   ├── lib                # 라이브러리 파일들.\n│   ├── lib64              # 64비트 전용 라이브러리.\n│   ├── sbin               # 시스템 명령어.\n│   └── share              # 공유 데이터 (man page, 아이콘 등).\n└── var                    # 로그, 캐시, 메일 등 자주 변경되는 파일 저장소.\n    ├── log                # 시스템 로그 파일 저장소.\n    ├── cache              # 애플리케이션 캐시.\n    └── tmp                # 임시 파일 저장소 (보다 긴 기간 유지될 수 있음).\n```\nUbuntu의 디렉토리 구조\n:::\n\n\n\n\n\n\n## 이전설치방식\n\n### wsl 옵션 활성화\n\n- Powershell 관리자권한으로 열어서 아래 명령어를 실행한다.\n\n\n\n\n::: {.cell filename='PowerShell'}\n\n```{.r .cell-code}\ndism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /norestart\n```\n:::\n\n\n\n\n\n### VirtualMachinePlatform 옵션 활성화\n\n\n\n\n::: {.cell filename='PowerShell'}\n\n```{.r .cell-code}\ndism.exe /online /enable-feature /featurename:VirtualMachinePlatform /norestart\n```\n:::\n\n\n\n\n\n### Linux 커널 업데이트\n\n윈도우에 포함된 기본 버전을 업데이트하는 방법도 있다.\n\n\n\n\n::: {.cell filename='PowerShell'}\n\n```{.r .cell-code}\nwsl --upgrade\n```\n:::\n\n\n\n\n아래의 명령을 전후로 사용하면 Kenel의 버전을 비교하여 알 수 있다.\n\n\n\n\n::: {.cell filename='PowerShell'}\n\n```{.r .cell-code}\nwsl --status\n```\n:::\n\n\n\n\n\n### 우분투 실행\n\n시작메뉴에서 Ubuntu를 검색하여 실행한다.\n\n### 우분투 업데이트\n\n\n\n\n::: {.cell filename='bash'}\n\n```{.r .cell-code}\nsudo apt update\nsudo apt upgrade\n```\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}